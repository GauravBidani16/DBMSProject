<p-toast></p-toast>

<div class="grid">
  <div class="col-12">
    <div class="flex justify-content-between align-items-center">
      <h1>Admin Dashboard</h1>
      <button pButton pRipple label="Register Doctor" icon="pi pi-user-plus" class="p-button-success" routerLink="/admin/register-doctor"></button>
    </div>
    <p>Welcome to Meditrendz...!</p>
  </div>
  
  <!-- Dashboard Stats -->
  <div class="col-12 md:col-6 lg:col-3">
    <p-card styleClass="h-full">
      <div *ngIf="!loading" class="text-center">
        <i class="pi pi-users text-4xl text-primary mb-3"></i>
        <div class="text-900 font-medium text-xl mb-2">Total Patients</div>
        <div class="text-900 font-bold text-5xl">{{ dashboardStats?.totalPatients || 0 }}</div>
      </div>
    </p-card>
  </div>
  
  <div class="col-12 md:col-6 lg:col-3">
    <p-card styleClass="h-full">
      <div *ngIf="!loading" class="text-center">
        <i class="pi pi-user-plus text-4xl text-primary mb-3"></i>
        <div class="text-900 font-medium text-xl mb-2">Doctors</div>
        <div class="text-900 font-bold text-5xl">{{ dashboardStats?.totalDoctors || 0 }}</div>
      </div>
    </p-card>
  </div>
  
  <div class="col-12 md:col-6 lg:col-3">
    <p-card styleClass="h-full">
      <div *ngIf="!loading" class="text-center">
        <i class="pi pi-calendar text-4xl text-primary mb-3"></i>
        <div class="text-900 font-medium text-xl mb-2">Today's Appointments</div>
        <div class="text-900 font-bold text-5xl">{{ dashboardStats?.todayAppointments || 0 }}</div>
      </div>
    </p-card>
  </div>
  
  <div class="col-12 md:col-6 lg:col-3">
    <p-card styleClass="h-full">
      <div *ngIf="!loading" class="text-center">
        <i class="pi pi-bed text-4xl text-primary mb-3"></i>
        <div class="text-900 font-medium text-xl mb-2">Available Beds</div>
        <div class="text-900 font-bold text-5xl">{{ dashboardStats?.availableBeds || 0 }}</div>
      </div>
    </p-card>
  </div>
  
  <!-- Monthly Statistics -->
  <div class="col-12">
    <p-card header="Monthly Hospital Statistics">
      <div *ngIf="!loading">
        <p-table [value]="dashboardStats?.monthlyStats || []" [paginator]="true" [rows]="6" styleClass="p-datatable-sm">
          <ng-template pTemplate="header">
            <tr>
              <th>Month</th>
              <th>Appointments</th>
              <th>Admissions</th>
              <th>Discharged</th>
              <th>Revenue</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-stat>
            <tr>
              <td>{{ stat.month }}</td>
              <td>{{ stat.appointments }}</td>
              <td>{{ stat.admissions }}</td>
              <td>{{ stat.discharged }}</td>
              <td>${{ stat.revenue.toLocaleString() }}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="5" class="text-center p-4">No data available.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-card>
  </div>
  
  <!-- Quick Links -->
  <div class="col-12">
    <p-card header="Quick Access">
      <div class="grid">
        <div class="col-6 md:col-3">
          <button pButton pRipple label="Patients" icon="pi pi-users" class="p-button-outlined w-full" routerLink="/patient"></button>
        </div>
        <div class="col-6 md:col-3">
          <button pButton pRipple label="Appointments" icon="pi pi-calendar" class="p-button-outlined w-full" routerLink="/appointment"></button>
        </div>
        <div class="col-6 md:col-3">
          <button pButton pRipple label="Bed Management" icon="pi pi-th-large" class="p-button-outlined w-full" routerLink="/beds"></button>
        </div>
        <div class="col-6 md:col-3">
          <button pButton pRipple label="Pharmacy" icon="pi pi-briefcase" class="p-button-outlined w-full" routerLink="/pharmacy"></button>
        </div>
      </div>
    </p-card>
  </div>
</div>